(this["webpackJsonpaudio-pipes"]=this["webpackJsonpaudio-pipes"]||[]).push([[0],{24:function(e,t,n){e.exports=n.p+"25f83a8184c7a4f4d712.worklet.js"},25:function(e,t,n){e.exports=n.p+"264005fc3fbac0df3cbb.worklet.js"},26:function(e,t,n){e.exports=n.p+"7dba029d86b844d8016f.worklet.js"},27:function(e,t,n){e.exports=n.p+"2e77cfc056b8fa914a0f.worklet.js"},28:function(e,t,n){e.exports=n.p+"4ed615d1f9dca87c6212.worklet.js"},29:function(e,t,n){e.exports=n.p+"897bbdcfb2b44a667a76.worklet.js"},30:function(e,t,n){e.exports=n.p+"facaf7919522ba0e40ad.worklet.js"},31:function(e,t,n){e.exports=n.p+"cadd6a708e4d2b9947b3.worklet.js"},32:function(e,t,n){e.exports=n.p+"8db703de13a376294788.worklet.js"},33:function(e,t,n){e.exports=n.p+"f9fe33625e24ee0c7feb.worklet.js"},34:function(e,t,n){e.exports=n.p+"2f4ffd4dc2da4be65819.worklet.js"},35:function(e,t,n){e.exports=n.p+"3775d4dc70be610cb423.worklet.js"},36:function(e,t,n){e.exports=n.p+"8576755c7f889213a206.worklet.js"},37:function(e,t,n){e.exports=n.p+"fbff70cf744eb55f2ea0.worklet.js"},38:function(e,t,n){e.exports=n.p+"be6edbc3442b64609e81.worklet.js"},47:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(14),i=n.n(o),r=(n(47),n(4)),u=n(9),s=n(11),l=n(5),d=n(3),f=n.n(d),p=Object(a.createContext)(null);var j=n(23),b=n(24),v=n.n(b),m=n(25),h=n.n(m),O=n(26),g=n.n(O),x=n(27),y=n.n(x),k=n(28),N=n.n(k),C=n(29),w=n.n(C),T=n(30),_=n.n(T),S=n(31),A=n.n(S),M=n(32),D=n.n(M),E=n(33),R=n.n(E),q=n(34),F=n.n(q),B=n(35),P=n.n(B),z=n(36),W=n.n(z),L=n(37),G=n.n(L),I=n(38),H=n.n(I),Q=n(1);var X=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(r.a)(n,2),o=c[0],i=c[1],u=Object(a.useMemo)((function(){try{return new j.a}catch(e){}}),[]);Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.audioWorklet){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([t.audioWorklet.addModule(v.a),t.audioWorklet.addModule(h.a),t.audioWorklet.addModule(g.a),t.audioWorklet.addModule(y.a),t.audioWorklet.addModule(N.a),t.audioWorklet.addModule(w.a),t.audioWorklet.addModule(_.a),t.audioWorklet.addModule(A.a),t.audioWorklet.addModule(D.a),t.audioWorklet.addModule(R.a),t.audioWorklet.addModule(F.a),t.audioWorklet.addModule(P.a),t.audioWorklet.addModule(W.a),t.audioWorklet.addModule(G.a),t.audioWorklet.addModule(H.a)]);case 4:i(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();u&&e(u)}),[u]);var s=Object(a.useCallback)((function(){"suspended"===(null===u||void 0===u?void 0:u.state)&&u.resume()}),[u]);return u?o?Object(Q.jsx)("div",{onClick:s,children:Object(Q.jsx)(p.Provider,{value:u,children:t})}):null:Object(Q.jsx)("div",{children:"Sorry, but the Web Audio API is not supported by your browser."})},K=n(2),U=Object(a.createContext)(null);function V(){return Object(a.useContext)(U)}var Y=n(72);var J=function(e){var t=e.children,n=c.a.useState(null),o=Object(r.a)(n,2),i=o[0],u=o[1],s=c.a.useState(),l=Object(r.a)(s,2),d=l[0],f=l[1],p=Object(a.useRef)(),j=Object(Y.a)(p.current,d,{placement:"bottom-start"}),b=j.styles,v=j.attributes,m=Object(a.useMemo)((function(){return{getRect:function(){return null==p.current?{top:0,left:0,right:0,bottom:0,width:0,height:0}:p.current.getBoundingClientRect()},hide:function(){u(null)},show:function(e){u(e)},setRect:function(e){p.current={getBoundingClientRect:function(){return e}}},setPopperElement:f}}),[]);return Object(Q.jsxs)(U.Provider,{value:m,children:[t,Object(Q.jsx)("div",Object(K.a)(Object(K.a)({ref:function(e){return e&&f(e)},style:b.popper},v.popper),{},{children:i}))]})},Z=n(8),$=[{items:[{label:"Audio Buffer Source",node:"AudioBufferSource"},{label:"Gate",node:"Gate"},{label:"Keyboard",node:"Keyboard"},{label:"Metronome",node:"Metronome"},{label:"Noise",node:"Noise"},{label:"Oscillator",node:"Oscillator"},{label:"Oscillator Note",node:"OscillatorNote"},{label:"AudioDevice",node:"AudioDeviceSource"}],label:"Sources"},{items:[{label:"AudioDevice",node:"Destination"}],label:"Destinations"},{items:[{label:"Biquad Filter",node:"BiquadFilter"},{label:"Channel Merger",node:"ChannelMerger"},{label:"Channel Splitter",node:"ChannelSplitter"},{label:"Clipper",node:"Clipper"},{label:"Delay",node:"Delay"},{label:"Delay Effect",node:"DelayEffect"},{label:"Dynamics Compressor",node:"DynamicsCompressor"},{label:"Equalizer",node:"Equalizer"},{label:"Gain",node:"Gain"},{label:"Quantizer",node:"Quantizer"},{label:"Raw Gain",node:"RawGain"},{label:"Rectifier",node:"Rectifier"},{label:"Sample and Hold",node:"SampleAndHold"},{label:"Sign",node:"Sign"},{label:"Stereo Panner",node:"StereoPanner"},{label:"Transformer",node:"Transformer"},{label:"Vocoder",node:"Vocoder"},{label:"Wave Shaper",node:"WaveShaper"}],label:"Effects"},{items:[{label:"ADSR",node:"ADSR"},{label:"Constant Source",node:"ConstantSource"},{label:"Envelope Follower",node:"EnvelopeFollower"},{label:"Input Switch",node:"InputSwitch"},{label:"Output Switch",node:"OutputSwitch"},{label:"XY Pad",node:"XYPad"}],label:"Controllers"},{items:[{label:"AND Gate",node:"AndGate"},{label:"Comparator",node:"Comparator"},{label:"NOT Gate",node:"NotGate"},{label:"OR Gate",node:"OrGate"},{label:"XOR Gate",node:"XorGate"}],label:"Logic"},{items:[{label:"Analyser",node:"Analyser"},{label:"Meter",node:"Meter"},{label:"Aubio",node:"Aubio"}],label:"Analysers"}];function ee(e){var t=e.addNode;return Object(Q.jsx)("ul",{className:"contextMenu",children:$.map((function(e){return Object(Q.jsxs)("li",{children:[e.label,Object(Q.jsx)("span",{children:"\u276f"}),e.items&&Object(Q.jsx)("ul",{className:"contextMenu sub",children:e.items.map((function(e){return Object(Q.jsx)("li",{onClick:function(){return t(e.node)},children:e.label},e.label)}))})]},e.label)}))})}var te=c.a.memo(ee),ne=n(7);function ae(e){var t,n,a,c,o,i,r,u;se(e)?(null===(t=e.input)||void 0===t||null===(n=t.stop)||void 0===n||n.call(t),null===(a=e.output)||void 0===a||null===(c=a.stop)||void 0===c||c.call(a),null===(o=e.input)||void 0===o||o.disconnect(),null===(i=e.output)||void 0===i||i.disconnect()):(null===(r=(u=e).stop)||void 0===r||r.call(u),e.disconnect(),e instanceof j.b&&e.port.postMessage("stop"))}var ce=function(e){var t=e.children,n=Object(a.useRef)({}),c=Object(a.useMemo)((function(){return{addNode:function(e,t){n.current[e]=t},getNode:function(e){return n.current[e]},nodes:n.current,removeNode:function(e){ae(n.current[e]),delete n.current[e]}}}),[]);return Object(Q.jsx)("div",{children:Object(Q.jsx)(le.Provider,{value:c,children:t})})};function oe(e){var t,n;return+(null!==(t=null===(n=e.match(/-(\d+)$/))||void 0===n?void 0:n[1])&&void 0!==t?t:0)}function ie(e,t){if(!e.source||!e.target||!e.sourceHandle||!e.targetHandle)throw new Error("Invalid connection");var n=e.targetHandle.startsWith("input"),a=e.sourceHandle.startsWith("output"),c=t(e.source),o=t(e.target);if(se(c)&&a){if(!c.output)throw new Error("Invalid connection");c=c.output}if(se(o)&&n){if(!o.input)throw new Error("Invalid connection");o=o.input}if(!c||!o)throw new Error("Invalid connection");return{inputIndex:n?oe(e.targetHandle):void 0,outputIndex:oe(e.sourceHandle),source:a?c:c[e.sourceHandle],target:n?o:o[e.targetHandle]}}function re(e,t){try{var n=ie(e,t),a=n.inputIndex,c=n.outputIndex,o=n.source,i=n.target;null!=a?o.connect(i,c,a):o.connect(i,c)}catch(r){console.error(r)}}function ue(e,t){try{var n=ie(e,t),a=n.inputIndex,c=n.outputIndex,o=n.source,i=n.target;null!=a?o.disconnect(i,c,a):o.disconnect(i,c)}catch(r){console.error(r)}}function se(e){return e&&"input"in e&&"output"in e}var le=Object(a.createContext)(null);function de(){return Object(a.useContext)(le)}function fe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=Object(a.useContext)(p),o=de(),i=o.addNode,r=o.getNode,s=o.removeNode,l=Object(u.k)((function(e){return e.edges})),d=Object(a.useMemo)((function(){return t(c)}),n);return Object(a.useEffect)((function(){i(e,d);var t=l.filter((function(t){return t.source===e||t.target===e}));return t.forEach((function(e){return re(e,r)})),function(){t.forEach((function(e){return ue(e,r)})),s(e)}}),[i,r,d,e,s]),d}var pe=n(10),je=n(73),be=Object(a.createContext)(null);function ve(){return Object(a.useContext)(be)}var me=["children","id","inputs","outputs","title","type"];function he(e){var t=e.children,n=e.id,c=e.inputs,o=e.outputs,i=e.title,r=e.type,s=Object(pe.a)(e,me),l=ve(),d=l.elements,f=l.onChangeElementFactory,p=l.setElements,j=V(),b=d.find((function(e){return e.id===n}));console.log(n);var v=Object(a.useMemo)((function(){return{background:"#0dbed".concat(n.substr(-1))}}),[n]),m=Object(a.useCallback)((function(){if(!b)throw new Error("Node does not exist - this should never happen");var e="".concat(r,"-").concat(Object(je.a)()),t=f(e),n={id:e,data:Object(K.a)(Object(K.a)({},b.data),{},{onChange:t}),type:b.type,position:{x:b.position.x+_a,y:b.position.y+_a}};p((function(e){return[].concat(Object(Z.a)(e),[n])})),j.hide()}),[j,f,b,p,r]),h=Object(a.useCallback)((function(){j.hide()}),[j]),O=Object(a.useCallback)((function(e){e.preventDefault(),j.setRect({width:0,height:0,top:e.clientY,right:0,bottom:0,left:e.clientX}),j.show(Object(Q.jsx)("ul",{className:"contextMenu",children:Object(Q.jsx)("li",{onClick:m,children:"Clone"})}))}),[m,j]);return Object(Q.jsxs)("div",Object(K.a)(Object(K.a)({className:"customNode",onClick:h,onContextMenu:O},s),{},{children:[Object(Q.jsx)("div",{title:n,className:"customNode_header",children:null!==i&&void 0!==i?i:r}),Object(Q.jsxs)("div",{className:"customNode_body",children:[c&&Object(Q.jsx)("div",{className:"customNode_inputs",children:c.map((function(e){return Object(Q.jsxs)("div",{className:"customNode_item",children:[Object(Q.jsx)(u.c,{id:e,position:u.d.Left,style:v,type:"target"}),e]},e)}))}),o&&Object(Q.jsx)("div",{className:"customNode_outputs",children:o.map((function(e){return Object(Q.jsxs)("div",{className:"customNode_item",children:[Object(Q.jsx)(u.c,{id:e,position:u.d.Right,style:v,type:"source"}),e]},e)}))})]}),t]}))}var Oe=c.a.memo(he);var ge,xe,ye,ke=function(e,t,n,a){return fe(e,(function(a){return new j.b(a,t,Object(K.a)(Object(K.a)({},n),{},{processorOptions:Object(K.a)(Object(K.a)({},null===n||void 0===n?void 0:n.processorOptions),{},{id:e})}))}),a)};function Ne(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.attackTime,r=void 0===i?.2:i,u=t.decayTime,s=void 0===u?.1:u,l=t.mode,d=void 0===l?ge.Linear:l,f=t.onChange,p=t.releaseTime,j=void 0===p?.6:p,b=t.sustainLevel,v=void 0===b?.7:b,m=t.sustainOn,h=void 0===m||m,O=ke(n,"adsr-processor",{processorOptions:{sustainOn:h,mode:d}},[d,h]),g=fe(n,(function(){var e;return e={},Object(ne.a)(e,xe.AttackTime,O.parameters.get(xe.AttackTime)),Object(ne.a)(e,xe.DecayTime,O.parameters.get(xe.DecayTime)),Object(ne.a)(e,"gain",O),Object(ne.a)(e,"gate",O),Object(ne.a)(e,"input",void 0),Object(ne.a)(e,"output",void 0),Object(ne.a)(e,xe.ReleaseTime,O.parameters.get(xe.ReleaseTime)),Object(ne.a)(e,xe.SustainLevel,O.parameters.get(xe.SustainLevel)),e}),[d,h]);return Object(a.useEffect)((function(){g[xe.AttackTime].value=r}),[g,r]),Object(a.useEffect)((function(){g[xe.DecayTime].value=s}),[g,s]),Object(a.useEffect)((function(){g[xe.ReleaseTime].value=j}),[g,j]),Object(a.useEffect)((function(){g[xe.SustainLevel].value=v}),[g,v]),Object(Q.jsx)(Oe,{id:n,inputs:["gate",xe.AttackTime,xe.DecayTime,xe.ReleaseTime,xe.SustainLevel],outputs:["gain"],title:"ADSR",type:o,children:c&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsxs)("select",{onChange:function(e){return f({mode:e.target.value})},title:"Type",value:d,children:[Object(Q.jsx)("option",{value:ge.Exponential,children:ge.Exponential}),Object(Q.jsx)("option",{value:ge.Linear,children:ge.Linear}),Object(Q.jsx)("option",{value:ge.Logarithmic,children:ge.Logarithmic})]})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsxs)("label",{children:[Object(Q.jsx)("input",{checked:h,onChange:function(){return f({sustainOn:!h})},title:"Sustain",type:"checkbox"}),"sustain on"]})}),Object(Q.jsxs)("div",{className:"customNode_item",style:{width:138},children:[Object(Q.jsx)("input",{min:0,onChange:function(e){return f({attackTime:+e.target.value})},step:.05,style:{width:"50%"},title:"Attack time",type:"number",value:r}),Object(Q.jsx)("input",{min:0,onChange:function(e){return f({decayTime:+e.target.value})},step:.05,style:{width:"50%"},title:"Decay time",type:"number",value:s})]}),Object(Q.jsxs)("div",{className:"customNode_item",style:{width:138},children:[Object(Q.jsx)("input",{min:0,onChange:function(e){return f({releaseTime:+e.target.value})},step:.05,style:{width:"50%"},title:"Release time",type:"number",value:j}),Object(Q.jsx)("input",{max:1,min:0,onChange:function(e){return f({sustainLevel:+e.target.value})},step:.01,style:{width:"50%"},title:"Sustain level",type:"number",value:v})]})]})})}!function(e){e.Exponential="Exponential",e.Linear="Linear",e.Logarithmic="Logarithmic"}(ge||(ge={})),function(e){e.AttackTime="attack",e.DecayTime="decay",e.ReleaseTime="release",e.SustainLevel="sustain"}(xe||(xe={})),function(e){e.Attack="Attack",e.Decay="Decay",e.Release="Release",e.Sustain="Sustain"}(ye||(ye={}));var Ce=c.a.memo(Ne);function we(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){var e,a,c=function(){return e=e||Date.now(),Date.now()-e},o=function(){return a=requestAnimationFrame(i)},i=function(){o(),n.current&&n.current(c())};if(t)return c(),o(),function(){return cancelAnimationFrame(a)}}),[t])}var Te=["node","paused","type"];function _e(e){var t=e.node,n=e.paused,c=e.type,o=Object(pe.a)(e,Te),i=Object(a.useRef)(new Uint8Array(t.frequencyBinCount)),r=Object(a.useRef)(null),u=Object(a.useCallback)((function(){var e=r.current,t=null===e||void 0===e?void 0:e.getContext("2d");e&&t&&(c===De.TimeDomain?function(e,t){var n=0,a=e.canvas.height,c=e.canvas.width,o=t.length,i=c/o;e.fillStyle="#000014",e.fillRect(0,0,c,256),e.lineWidth=2,e.strokeStyle="#0dbedc",e.beginPath(),e.moveTo(n,a-t[0]/128*a/2);for(var r=1;r<o;r++){var u=t[r]/128*a/2;e.lineTo(n,a-u),n+=i}e.stroke()}(t,i.current):c===De.Frequency&&function(e,t){var n=0,a=e.canvas.height,c=e.canvas.width,o=t.length,i=c/o;e.fillStyle="#000014",e.fillRect(0,0,c,a),e.fillStyle="#0000c8";for(var r=0;r<o;r++){var u=a*(t[r]/255),s=a-u;e.fillRect(n,s,i,u),n+=i}}(t,i.current))}),[c]),s=Object(a.useCallback)((function(){var e=t.frequencyBinCount,n=new Uint8Array(e);c===De.TimeDomain?t.getByteTimeDomainData(n):c===De.Frequency&&t.getByteFrequencyData(n),i.current=n}),[t,c]);return we(Object(a.useCallback)((function(){s(),u()}),[u,s]),!n),Object(Q.jsx)("canvas",Object(K.a)({ref:r,style:{display:"block",borderRadius:5,marginBottom:5}},o))}var Se=c.a.memo(_e),Ae=n(40);function Me(e,t){var n=Object(a.useRef)();Object(Ae.a)((function(){n.current&&n.current()})),Object(a.useMemo)((function(){n.current&&n.current();var t=e();n.current=t instanceof Function?t:void 0}),t)}var De,Ee=function(e,t){var n=t.fftSizeExp,a=void 0===n?11:n,c=fe(e,(function(e){return e.createAnalyser()}));return Me((function(){c.fftSize=Math.pow(2,a)}),[c,a]),c};function Re(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.fftSizeExp,i=void 0===o?11:o,r=t.onChange,u=t.paused,s=void 0!==u&&u,l=t.type,d=void 0===l?De.TimeDomain:l,f=Ee(n,{fftSizeExp:i});return Object(Q.jsxs)(Oe,{id:n,inputs:["input","fftSize"],outputs:["output"],title:"Analyser: ".concat(d),type:c,children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)(Se,{type:d,node:f,paused:s,height:64,width:256})}),a&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsxs)("div",{className:"customNode_item",children:[Object(Q.jsx)("input",{type:"range",max:"15",min:"5",onChange:function(e){return r({fftSizeExp:+e.target.value})},step:1,value:i}),Math.pow(2,i)]}),Object(Q.jsxs)("div",{className:"customNode_item",style:{justifyContent:"space-between"},children:[Object(Q.jsxs)("select",{onChange:function(e){return r({type:e.target.value})},title:"Type",value:d,children:[Object(Q.jsx)("option",{value:De.Frequency,children:De.Frequency}),Object(Q.jsx)("option",{value:De.TimeDomain,children:De.TimeDomain})]}),Object(Q.jsxs)("label",{children:[Object(Q.jsx)("input",{checked:s,onChange:function(e){return r({paused:!s})},title:"Pause",type:"checkbox"}),"Paused"]})]})]})]})}!function(e){e.Frequency="Frequency",e.TimeDomain="Time Domain"}(De||(De={}));var qe=c.a.memo(Re);function Fe(e){var t=e.id,n=e.type;return ke(t,"and-gate-processor",{numberOfInputs:2}),Object(Q.jsx)(Oe,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Gate: AND",type:n})}var Be=c.a.memo(Fe);function Pe(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.loop,r=void 0===i||i,u=t.onChange,s=Object(a.useRef)(),d=fe(n,(function(e){return e.createGain()})),p=Object(a.useCallback)((function(e){var t;null===(t=s.current)||void 0===t||t.disconnect(),s.current=e,s.current.connect(d)}),[d]),j=Object(a.useCallback)((function(){if(s.current){var e=d.context.createBufferSource();e.buffer=s.current.buffer,e.loop=r,p(e),s.current.start()}}),[d,r,p]),b=Object(a.useCallback)((function(){try{var e;null===(e=s.current)||void 0===e||e.stop()}catch(t){}}),[]),v=Object(a.useCallback)(function(){var e=Object(l.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.context.createBufferSource(),e.t0=d.context,e.next=4,t.arrayBuffer();case 4:return e.t1=e.sent,e.next=7,e.t0.decodeAudioData.call(e.t0,e.t1);case 7:n.buffer=e.sent,n.loop=r,p(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,r,p]),m=Object(a.useCallback)((function(e){e.preventDefault(),v(e.target.files[0])}),[v]),h=Object(a.useCallback)((function(e){e.preventDefault()}),[]),O=Object(a.useCallback)(function(){var e=Object(l.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=Object(Z.a)(t.dataTransfer.items).filter((function(e){return"file"===e.kind}))[0].getAsFile(),v(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v]);return Object(Q.jsx)(Oe,{id:n,outputs:["output"],title:"Buffer Source",type:o,onDragOver:h,onDrop:O,children:Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsxs)("div",{className:"customNode_item",children:[Object(Q.jsx)("button",{onClick:j,children:"\u25b6"}),Object(Q.jsx)("button",{onClick:b,children:"\u25fd"})]}),c&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{onChange:m,type:"file"})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsxs)("label",{children:[Object(Q.jsx)("input",{checked:r,onChange:function(){return u({loop:!r})},title:"Loop",type:"checkbox"}),"Loop"]})})]})]})})}var ze=c.a.memo(Pe);var We=function(e,t){var n=t.detune,a=void 0===n?0:n,c=t.frequency,o=void 0===c?350:c,i=t.gain,r=void 0===i?0:i,u=t.Q,s=void 0===u?1:u,l=t.type,d=void 0===l?"lowpass":l,f=fe(e,(function(e){return e.createBiquadFilter()}));return Me((function(){f.detune.value=a}),[f,a]),Me((function(){f.frequency.value=o}),[f,o]),Me((function(){f.gain.value=r}),[f,r]),Me((function(){f.Q.value=s}),[f,s]),Me((function(){f.type=d}),[f,d]),f},Le=["lowshelf","highshelf","peaking"],Ge=["lowpass","highpass","bandpass","peaking","notch","allpass"];function Ie(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.detune,r=void 0===i?0:i,u=t.gain,s=void 0===u?0:u,l=t.frequency,d=void 0===l?350:l,f=t.Q,p=void 0===f?1:f,j=t.onChange,b=t.type,v=void 0===b?"lowpass":b,m=Object(a.useRef)(null),h=We(n,{detune:r,frequency:d,gain:s,Q:p,type:v});Object(a.useEffect)((function(){var e=m.current,t=null===e||void 0===e?void 0:e.getContext("2d");if(e&&t){var n=new Float32Array(h.context.sampleRate/200).map((function(e,t){return 100*t})),a=new Float32Array(n.length),c=new Float32Array(n.length);h.getFrequencyResponse(n,a,c),function(e,t,n){var a=0,c=e.canvas.height,o=e.canvas.width,i=t.length,r=o/i;e.fillStyle="#000014",e.fillRect(0,0,o,c),e.lineWidth=1,e.strokeStyle="#ffffff77",e.beginPath(),e.moveTo(n.frequency.value/(n.context.sampleRate/2)*o,0),e.lineTo(n.frequency.value/(n.context.sampleRate/2)*o,c),e.stroke(),e.closePath(),e.lineWidth=2,e.strokeStyle="#0000c8",e.beginPath();for(var u=0;u<i;u++){var s=t[u]*c/2;e.lineTo(a,c-s),a+=r}e.stroke()}(t,a,h)}}),[h,r,s,d,p,c,v]);var O=Le.includes(v),g=Ge.includes(v);return Object(Q.jsx)(Oe,{id:n,inputs:["input","detune","frequency","gain","Q"],outputs:["output"],title:"Filter: ".concat(v),type:o,children:c&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{min:-100,max:100,onChange:function(e){return j({detune:+e.target.value})},step:1,title:"Detune: ".concat(r," cents"),type:"range",value:r})}),Object(Q.jsxs)("div",{className:"customNode_item",children:[Object(Q.jsx)("input",{min:10,max:h.context.sampleRate/2,onChange:function(e){return j({frequency:+e.target.value})},step:1,title:"Frequency: ".concat(d," Hz"),type:"range",value:d}),Object(Q.jsx)("input",{type:"number",value:d,onChange:function(e){return j({frequency:+e.target.value})}})]}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{disabled:!O,min:-40,max:40,onChange:function(e){return j({gain:+e.target.value})},step:.1,title:"Gain: ".concat(s," dB"),type:"range",value:s})}),Object(Q.jsxs)("div",{className:"customNode_item",children:[Object(Q.jsx)("input",{disabled:!g,min:1e-4,max:["lowpass","highpass"].includes(v)?10:1e3,onChange:function(e){return j({Q:+e.target.value})},step:["lowpass","highpass"].includes(v)?.1:10,title:"Q: ".concat(p),type:"range",value:p}),Object(Q.jsx)("input",{type:"number",value:p,onChange:function(e){return j({Q:+e.target.value})}})]}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsxs)("select",{onChange:function(e){return j({type:e.target.value})},value:v,children:[Object(Q.jsx)("option",{value:"lowpass",children:"lowpass"}),Object(Q.jsx)("option",{value:"highpass",children:"highpass"}),Object(Q.jsx)("option",{value:"bandpass",children:"bandpass"}),Object(Q.jsx)("option",{value:"lowshelf",children:"lowshelf"}),Object(Q.jsx)("option",{value:"highshelf",children:"highshelf"}),Object(Q.jsx)("option",{value:"peaking",children:"peaking"}),Object(Q.jsx)("option",{value:"notch",children:"notch"}),Object(Q.jsx)("option",{value:"allpass",children:"allpass"})]})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("canvas",{ref:m,height:64,width:256})})]})})}var He=c.a.memo(Ie);var Qe=function(e,t){var n=t.inputs,a=void 0===n?2:n;return fe(e,(function(e){return e.createChannelMerger(a)}),[a])},Xe={2:"Stereo",4:"Quad",6:"5.1"};function Ke(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.inputs,i=void 0===o?2:o,r=t.onChange,u=Qe(n,{inputs:i});return Object(Q.jsx)(Oe,{id:n,inputs:Array(u.numberOfInputs).fill(0).map((function(e,t){return"input-".concat(t)})),outputs:["output"],type:c,children:a&&Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"customNode_item",style:{alignItems:"flex-start",flexDirection:"column"},children:Object.keys(Xe).map((function(e){return Object(Q.jsxs)("label",{title:"Channel configuration",children:[Object(Q.jsx)("input",{checked:i===+e,onChange:function(e){return r({inputs:+e.target.value})},type:"radio",value:+e})," ",Xe[e]]},e)}))})})})}var Ue=c.a.memo(Ke);var Ve=function(e,t){var n=t.outputs,a=void 0===n?2:n;return fe(e,(function(e){return e.createChannelSplitter(a)}),[a])};function Ye(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.onChange,i=t.outputs,r=void 0===i?2:i,u=Ve(n,{outputs:r});return Object(Q.jsx)(Oe,{id:n,inputs:["input"],outputs:Array(u.numberOfOutputs).fill(0).map((function(e,t){return"output-".concat(t)})),type:c,children:a&&Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"customNode_item",style:{alignItems:"flex-start",flexDirection:"column"},children:Object.keys(Xe).map((function(e){return Object(Q.jsxs)("label",{title:"Channel configuration",children:[Object(Q.jsx)("input",{checked:r===+e,onChange:function(e){return o({outputs:+e.target.value})},type:"radio",value:+e})," ",Xe[e]]},e)}))})})})}var Je=c.a.memo(Ye);var Ze=function(e,t){var n=t.curve,a=void 0===n?null:n,c=t.oversample,o=void 0===c?"none":c,i=fe(e,(function(e){return e.createWaveShaper()}));return Me((function(){i.curve=a}),[i,a]),Me((function(){i.oversample=o}),[i,o]),i},$e=new Float32Array([-1,1]);function et(e){var t=e.id,n=e.type;return Ze(t,{curve:$e}),Object(Q.jsx)(Oe,{id:t,inputs:["input"],outputs:["output"],type:n})}var tt=c.a.memo(et);function nt(e){var t=e.id,n=e.type;return ke(t,"comparator-processor",{numberOfInputs:2}),Object(Q.jsx)(Oe,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Comparator",type:n})}var at=c.a.memo(nt);var ct=function(e,t){var n=t.offset,a=void 0===n?0:n,c=fe(e,(function(e){return e.createConstantSource()}));return Me((function(){return c.start(),function(){return c.stop()}}),[c]),Me((function(){c.offset.value=a}),[c,a]),c};function ot(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.offset,i=void 0===o?1:o,r=t.onChange;return ct(n,{offset:i}),Object(Q.jsx)(Oe,{id:n,outputs:["output"],title:"Constant: ".concat(i),type:c,children:a&&Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{onChange:function(e){return r({offset:+e.target.value})},style:{width:"100%"},title:"Offset",type:"number",value:i})})})})}var it=c.a.memo(ot);var rt=function(e,t){var n=t.delayTime,a=void 0===n?1:n,c=t.maxDelayTime,o=void 0===c?1:c,i=fe(e,(function(e){return e.createDelay(o)}),[o]);return Me((function(){i.delayTime.value=a}),[i,a]),i};function ut(e){return Math.max(.001,Math.min(179.999,e))}function st(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.delayTime,i=void 0===o?1:o,r=t.maxDelayTime,u=void 0===r?1:r,s=t.onChange,l=rt(n,{delayTime:i,maxDelayTime:u});return Object(Q.jsx)(Oe,{id:n,inputs:["input","delayTime"],outputs:["output"],title:"Delay: ".concat(i," s"),type:c,children:a&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{max:l.delayTime.maxValue,min:l.delayTime.minValue,step:ut(u)/10,onChange:function(e){return s({delayTime:+e.target.value})},title:"Delay: ".concat(i," s"),type:"range",value:i})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{onChange:function(e){return s({maxDelayTime:+e.target.value})},max:0,min:180,title:"Max delay",type:"number",value:ut(u)})})]})})}var lt,dt=c.a.memo(st),ft=["onChange","type","value"];!function(e){e.Linear="Linear",e.Log="Log"}(lt||(lt={}));var pt=function(e){var t=e.onChange,n=e.type,c=e.value,o=Object(pe.a)(e,ft),i=.001,r=c;n===lt.Log&&(i=9/(1/i),r=function(e){return(Math.pow(10,e)-1)/9}(r));var u=Object(a.useCallback)((function(e){var a=+e.target.value;n===lt.Log&&(a=function(e){return Math.log10(1+9*e)}(a)),t(a)}),[t,n]);return Object(Q.jsx)("input",Object(K.a)(Object(K.a)({},o),{},{type:"range",max:1,min:0,step:i,onChange:u,value:r}))};var jt=function(e,t){var n=t.gain,a=void 0===n?1:n,c=t.instant,o=void 0!==c&&c,i=fe(e,(function(e){return e.createGain()}));return Me((function(){o?i.gain.value=a:i.gain.setTargetAtTime(a,i.context.currentTime,.015)}),[i,a,o]),i};function bt(e){return Math.pow(10,e/20)}function vt(e){return 20*Math.log10(Math.abs(e))}function mt(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.delayTime,r=void 0===i?.2:i,u=t.feedback,s=void 0===u?.7:u,l=t.mix,d=void 0===l?.5:l,f=t.onChange,p=jt("".concat(n,"_input"),{}),j=jt("".concat(n,"_output"),{}),b=jt("".concat(n,"_dry"),{gain:Math.cos(.5*d*Math.PI)}),v=jt("".concat(n,"_wet"),{gain:Math.cos(.5*(1-d)*Math.PI)}),m=rt("".concat(n,"_delay"),{delayTime:r}),h=jt("".concat(n,"_feedback"),{gain:s});return Object(a.useEffect)((function(){p.connect(b),b.connect(j)}),[b,p,j]),Object(a.useEffect)((function(){p.connect(m),m.connect(v),v.connect(j)}),[m,p,j,v]),Object(a.useEffect)((function(){v.connect(h),h.connect(m)}),[m,h,v]),fe(n,(function(){return{input:p,output:j}}),[p,j]),Object(Q.jsx)(Oe,{id:n,inputs:["input"],outputs:["output"],title:"DelayEffect",type:o,children:c&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{max:"1",min:"0",onChange:function(e){return f({mix:+e.target.value})},step:"0.01",title:"Mix: ".concat(100*(1-d),"% dry / ").concat(100*d,"% wet"),type:"range",value:d})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{max:"1",min:"0",onChange:function(e){return f({delayTime:+e.target.value})},step:"0.01",title:"Delay: ".concat(r," s"),type:"range",value:r})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)(pt,{onChange:function(e){return f({feedback:e})},title:"Feedback: ".concat(vt(s).toFixed(2)," dB"),type:lt.Linear,value:s})})]})})}var ht=c.a.memo(mt);var Ot=function(e){return fe(e,(function(e){return e.destination}))};function gt(e){var t=e.id,n=e.type,c=e.selected;Ot(t);var o=Object(a.useState)([]),i=Object(r.a)(o,2),u=i[0],s=i[1];return Object(a.useEffect)((function(){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(e){e.length&&s(e.filter((function(e){return"audiooutput"===e.kind})))})).catch((function(e){console.log(e.name+": "+e.message)})):console.log("enumerateDevices() not supported.")}),[]),Object(Q.jsx)(Oe,{id:t,inputs:["input"],type:n,title:"Destination: Audio Device",children:c&&u.length>0&&Object(Q.jsx)("select",{children:u&&u.map((function(e){return Object(Q.jsx)("option",{children:e.label})}))})})}var xt=c.a.memo(gt);var yt=function(e,t){var n=t.attack,a=void 0===n?.003:n,c=t.knee,o=void 0===c?30:c,i=t.ratio,r=void 0===i?12:i,u=t.release,s=void 0===u?.25:u,l=t.threshold,d=void 0===l?-24:l,f=fe(e,(function(e){return e.createDynamicsCompressor()}));return Me((function(){f.threshold.value=d}),[f,d]),Me((function(){f.knee.value=o}),[f,o]),Me((function(){f.ratio.value=r}),[f,r]),Me((function(){f.attack.value=a}),[f,a]),Me((function(){f.release.value=s}),[f,s]),f};function kt(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.attack,i=void 0===o?.003:o,r=t.knee,u=void 0===r?30:r,s=t.onChange,l=t.ratio,d=void 0===l?12:l,f=t.release,p=void 0===f?.25:f,j=t.threshold,b=void 0===j?-24:j;return yt(n,{attack:i,knee:u,ratio:d,release:p,threshold:b}),Object(Q.jsx)(Oe,{id:n,inputs:["input","threshold","knee","ratio","attack","release"],outputs:["output"],type:c,children:a&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{min:"-100",max:"0",onChange:function(e){return s({threshold:+e.target.value})},step:"1",title:"Threshold: ".concat(b," dB"),type:"range",value:b})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{min:"0",max:"40",onChange:function(e){return s({knee:+e.target.value})},step:"1",title:"Knee: ".concat(u," dB"),type:"range",value:u})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{min:"1",max:"20",onChange:function(e){return s({ratio:+e.target.value})},step:"1",title:"Ratio: ".concat(d," dB"),type:"range",value:d})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{min:"0",max:"1",onChange:function(e){return s({attack:+e.target.value})},step:"0.001",title:"Attack: ".concat(i," s"),type:"range",value:i})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{min:"0",max:"1",onChange:function(e){return s({release:+e.target.value})},step:"0.001",title:"Release: ".concat(p," s"),type:"range",value:p})})]})})}var Nt,Ct,wt=c.a.memo(kt);!function(e){e.AttackTime="attack",e.ReleaseTime="release"}(Ct||(Ct={}));var Tt=(Nt={},Object(ne.a)(Nt,Ct.AttackTime,2e-4),Object(ne.a)(Nt,Ct.ReleaseTime,4e-4),Nt);function _t(e){var t=e.id,n=e.type,c=e.data,o=e.selected,i=c.attack,r=void 0===i?Tt.attack:i,u=c.release,s=void 0===u?Tt.release:u,l=c.onChange,d="worklet_".concat(t),f=ke(d,"envelope-follower"),p=fe(t,(function(){var e;return e={},Object(ne.a)(e,Ct.AttackTime,f.parameters.get(Ct.AttackTime)),Object(ne.a)(e,Ct.ReleaseTime,f.parameters.get(Ct.ReleaseTime)),Object(ne.a)(e,"input",f),Object(ne.a)(e,"output",f),e}),[f]);return Object(a.useEffect)((function(){p[Ct.AttackTime].value=r}),[p,r]),Object(a.useEffect)((function(){p[Ct.ReleaseTime].value=s}),[p,s]),Object(Q.jsx)(Oe,{id:t,inputs:["input",Ct.AttackTime,Ct.ReleaseTime],outputs:["output"],title:"Envelope Follower",type:n,children:o&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{min:0,onChange:function(e){return l(Object(ne.a)({},Ct.AttackTime,+e.target.value))},step:.05,style:{width:"50%"},title:"Attack time",type:"number",value:r})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{min:0,onChange:function(e){return l(Object(ne.a)({},Ct.ReleaseTime,+e.target.value))},step:.05,style:{width:"50%"},title:"Release time",type:"number",value:s})})]})})}var St=c.a.memo(_t),At=[32,64,125,250,500,1e3,2e3,4e3,8e3,16e3],Mt=At,Dt=Array(At.length).fill(0);function Et(e){var t=Math.pow(2,e);return Math.sqrt(t)/(t-1)}function Rt(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.bandwidth,r=void 0===i?1:i,u=t.gains,l=void 0===u?Dt:u,d=t.onChange,f=jt("".concat(n,"_input"),{}),p=jt("".concat(n,"_output"),{}),j=Mt.map((function(e,t,a){var c=0===t,o=t===a.length-1,i=!c&&!o?l[t]:0,u=c?"lowshelf":o?"highshelf":"peaking",s=Et(r);return We("".concat(n,"_filter_").concat(e),{frequency:e,gain:i,type:u,Q:s})}));return Object(a.useEffect)((function(){j.concat(p).reduce((function(e,t){return e.connect(t)}),f)}),[f,p].concat(Object(Z.a)(j))),fe(n,(function(){return{input:f,output:p}}),[f,p]),Object(a.useEffect)((function(){j.forEach((function(e,t){e.gain.setTargetAtTime(l[t],e.context.currentTime,.015)}))}),[j,l]),Object(a.useEffect)((function(){j.forEach((function(e){e.Q.setTargetAtTime(Et(r),e.context.currentTime,.015)}))}),[j,r]),Object(Q.jsx)(Oe,{id:n,inputs:["input"],outputs:["output"],title:"EQ",type:o,children:c&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("div",{className:"equalizer",children:j.map((function(e,t){return Object(Q.jsxs)("div",{children:[Object(Q.jsx)("input",{max:12,min:-12,onChange:function(e){return d({gains:Object(s.a)(l,(function(n){n[t]=+e.target.value}))})},step:.1,title:"Gain: ".concat(l[t]," dB"),type:"range",value:l[t]}),(n=e.frequency.value,n>=1e3?"".concat(Math.floor(n/1e3),"k"):"".concat(n))]},t);var n}))})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{max:4,min:.5,step:.5,onChange:function(e){return d({bandwidth:+e.target.value})},title:"Bandwidth: ".concat(r," octaves"),type:"range",value:r})})]})})}var qt=c.a.memo(Rt);function Ft(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.gain,i=void 0===o?1:o,r=t.onChange,u=t.type,s=void 0===u?lt.Log:u,l="Gain: ".concat(vt(i).toFixed(2)||0," dB");return jt(n,{gain:i}),Object(Q.jsx)(Oe,{id:n,inputs:["input","gain"],outputs:["output"],title:l,type:c,children:a&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)(pt,{onChange:function(e){return r({gain:e})},title:l,type:s,value:i})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsxs)("select",{onChange:function(e){return r({type:e.target.value})},title:"Type",value:s,children:[Object(Q.jsx)("option",{value:lt.Linear,children:lt.Linear}),Object(Q.jsx)("option",{value:lt.Log,children:lt.Log})]})})]})})}var Bt=c.a.memo(Ft);function Pt(e){var t=e.data,n=e.id,c=e.type,o=t.isOn,i=void 0!==o&&o,r=t.onChange,u=ct(n,{});Object(a.useEffect)((function(){u.offset.setTargetAtTime(i?1:0,u.context.currentTime,.015)}),[u,i]);var s=Object(a.useCallback)((function(e){"repeat"in e&&e.repeat||r({isOn:!0})}),[r]),l=Object(a.useCallback)((function(){return r({isOn:!1})}),[r]);return Object(Q.jsx)(Oe,{id:n,outputs:["output"],title:"Gate",type:c,children:Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsxs)("button",{onMouseDown:s,onMouseUp:l,onKeyDown:s,onKeyUp:l,children:["trigger ",i?"off":"on"]})})})}var zt=c.a.memo(Pt);var Wt=function(e){var t=e.checked,n=e.labelOff,a=void 0===n?"off":n,c=e.labelOn,o=void 0===c?"on":c,i=e.onChange;return Object(Q.jsxs)("label",{className:"toggle",children:[Object(Q.jsx)("input",{checked:t,onChange:i,type:"checkbox"}),Object(Q.jsx)("span",{className:"option",children:o}),Object(Q.jsx)("span",{className:"option",children:a})]})};function Lt(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.input,r=void 0===i?"A":i,u=t.onChange,s=jt("".concat(n,"_output"),{}),l=jt("".concat(n,"_inputA"),{}),d=jt("".concat(n,"_inputB"),{});Object(a.useEffect)((function(){l.connect(s),d.connect(s)}),[l,d,s]);var f=Object(a.useCallback)((function(){return u({input:"A"===r?"B":"A"})}),[u,r]);return Object(a.useEffect)((function(){"A"===r?(l.gain.setTargetAtTime(1,l.context.currentTime,.015),d.gain.setTargetAtTime(0,d.context.currentTime,.015)):(l.gain.setTargetAtTime(0,l.context.currentTime,.015),d.gain.setTargetAtTime(1,d.context.currentTime,.015))}),[r,l,d]),fe(n,(function(){return{input:void 0,A:l,B:d,output:s}}),[l,d,s]),Object(Q.jsx)(Oe,{id:n,inputs:["A","B"],outputs:["output"],title:"Input: ".concat(r),type:o,children:c&&Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)(Wt,{checked:"A"===r,labelOff:"B",labelOn:"A",onChange:f})})})})}var Gt,It,Ht=c.a.memo(Lt),Qt=["C","C\u266f","D","D\u266f","E","F","F\u266f","G","G\u266f","A","A\u266f","B"];function Xt(e){if(e<0||e>11)throw new RangeError("Twelfth must be between 0 and 11, is ".concat(e))}function Kt(e,t){!function(e){if(e<0||e>10)throw new RangeError("Octave must be between 0 and 10, is ".concat(e))}(e),Xt(t);return 16.3516*Math.pow(2,e+t/12)}function Ut(e){return Xt(e),Qt[e]}!function(e){e[e.Whole="\ueca2"]="Whole",e[e.Half="\ueca3"]="Half",e[e.Quarter="\ueca5"]="Quarter",e[e.Sixteenth="\ueca9"]="Sixteenth",e[e.Eight="\ueca7"]="Eight"}(Gt||(Gt={})),function(e){e[e.Whole=1]="Whole",e[e.Half=2]="Half",e[e.Quarter=4]="Quarter",e[e.Eight=8]="Eight",e[e.Sixteenth=16]="Sixteenth"}(It||(It={}));var Vt={display:"inline-block",textAlign:"center",width:"0.7em"},Yt=Object(K.a)(Object(K.a)({},Vt),{},{verticalAlign:"sub"}),Jt=Object(K.a)(Object(K.a)({},Vt),{},{transform:"translateX(-100%)",verticalAlign:"super"});function Zt(e){var t=e.detailed,n=void 0!==t&&t,a=e.detune,c=void 0===a?0:a,o=e.octave,i=e.twelfth,u=Ut(i).split(""),s=Object(r.a)(u,2),l=s[0],d=s[1],f=Kt(o,i),p=f*Math.pow(2,c/1200);return Object(Q.jsxs)("span",{children:[l,Object(Q.jsx)("small",{style:Yt,children:o}),d&&Object(Q.jsx)("small",{style:Jt,children:d}),n&&Object(Q.jsxs)(Q.Fragment,{children:["\xa0",Object(Q.jsxs)("small",{children:["(",f.toFixed(2)," Hz",0!==c&&Object(Q.jsxs)(Q.Fragment,{children:[" \u2192 ",p.toFixed(2)," Hz"]}),")"]})]})]})}var $t=c.a.memo(Zt),en=(n(58),[16,28,40,64,88]);function tn(e){var t=e.data,n=e.id,c=e.type,o=t.keys,i=void 0===o?16:o,r=t.octave,u=void 0===r?2:r,s=t.onChange,l=ct("".concat(n,"_gate"),{}),d=ct("".concat(n,"_frequency"),{}),f=Object(a.useCallback)((function(e,t){var n=d.context,a=Kt(e,t);d.offset.setTargetAtTime(a,n.currentTime,.015)}),[d]),p=Object(a.useCallback)((function(){l.offset.value=1}),[l]),j=Object(a.useCallback)((function(){l.offset.value=0}),[l]);return fe(n,(function(){return{frequency:d,gate:l,input:void 0,output:void 0}}),[d,l]),Object(Q.jsx)(Oe,{id:n,outputs:["frequency","gate"],title:"Keyboard",type:c,children:Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("div",{className:"keyboard",onMouseDown:p,onKeyDown:function(e){switch(e.key){case"a":f(1,9),p();break;case"w":f(1,10),p();break;case"s":f(1,11),p();break;case"d":f(2,0),p();break;case"r":f(2,1),p();break;case"f":f(2,2),p();break;case"t":f(2,3),p();break;case"g":f(2,4),p();break;case"h":f(2,5),p();break;case"u":f(2,6),p();break;case"j":f(2,7),p();break;case"i":f(2,8),p();break;case"k":f(2,9),p();break;case"o":f(2,10),p();break;case"l":f(2,11),p();break;case"\xf6":f(3,0),p()}},onKeyUp:function(e){e.key,j()},onMouseLeave:j,onMouseUp:j,children:Array(i).fill(null).map((function(e,t){var n=((t+-3)%12+12)%12,a=u+Math.floor((t+-3)/12),c=[1,3,6,8,10].includes(n)?"key key-black":"key key-white";return console.log(a,n),Object(Q.jsx)("button",{className:c,onMouseEnter:function(){return f(a,n)},children:Object(Q.jsx)($t,{octave:a,twelfth:n})},"".concat(a,"_").concat(n))}))})}),Object(Q.jsxs)("div",{className:"customNode_item",children:[Object(Q.jsx)("input",{min:1,max:6,onChange:function(e){return s({octave:+e.target.value})},style:{width:"50%"},title:"Octave",type:"number",value:u}),Object(Q.jsx)("select",{onChange:function(e){return s({keys:+e.target.value})},style:{width:"50%"},title:"Keys",value:i,children:en.map((function(e){return Object(Q.jsx)("option",{value:e,children:e},e)}))})]})]})})}var nn,an=c.a.memo(tn);var cn=null!==(nn=window.devicePixelRatio)&&void 0!==nn?nn:1;function on(e,t){e.setTransform(cn,0,0,cn,0,0),e.fillStyle="#000000",e.font="10px Arial",e.strokeStyle="#000000",e.textAlign="right",e.textBaseline="middle",e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore(),Array(55).fill(void 0).forEach((function(t,n){var a=[0,6,12,18,30,42,54].includes(n),c=a?1:.5,o=a?6:3,i="".concat(6-n),r=2*n+5.5,u=17+(a?0:3),s=r;a&&e.fillText(i,15,s),e.lineWidth=c,e.fillRect(0+u,r+0,o,c)})),t.forEach((function(t,n){Array(55).fill(void 0).forEach((function(a,c){var o,i=6-c,r=Math.min(Math.max(120*(o=Math.max(0,-i/10),Math.log10(1+9*o)),0),120).toFixed(0),u=vt(t)>=i?"50%":"0%";e.fillStyle="hsl(".concat(r,", 50%, ").concat(u,")"),e.fillRect(27*(n+1)-2,2*c+5,25,2)}))}))}function rn(e){var t=e.id,n=e.type,c=Object(a.useRef)(null),o=Object(a.useRef)([]),i=Object(a.useState)(1),u=Object(r.a)(i,2),s=u[0],l=u[1],d=27*(s+1),f=ke(t,"meter-processor",{numberOfOutputs:0}),p=Object(a.useCallback)((function(e){var t=e.data;"channels"===t.type&&t.payload.channels!==s&&l(t.payload.channels),"level"===t.type&&(o.current[t.payload.channel]=t.payload.level)}),[s]);return Object(a.useEffect)((function(){f.port.onmessage=p}),[f,p]),we(Object(a.useCallback)((function(){var e=c.current,t=null===e||void 0===e?void 0:e.getContext("2d");e&&t&&on(t,o.current.slice(0,s))}),[s]),!0),Object(Q.jsx)(Oe,{id:t,inputs:["input"],title:"Meter",type:n,children:Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("canvas",{ref:c,width:cn*d,height:120*cn,style:{height:120,width:d}})})})})}var un=c.a.memo(rn),sn=n(6),ln=(n(59),{fontFamily:"Bravura",fontSize:20,height:32,lineHeight:2,padding:0,width:32});function dn(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.beatsPerMeasure,r=void 0===i?4:i,u=t.beatsPerMinute,s=void 0===u?120:u,l=t.notes,d=void 0===l?[It.Quarter]:l,f=t.onChange,p=fe(n,(function(e){var t,n=60/s,a=n*r,c=e.createBuffer(1,e.sampleRate*a,e.sampleRate),o=c.getChannelData(0),i=Object(sn.a)(d);try{for(i.s();!(t=i.n()).done;)for(var u=t.value,l=n*It.Quarter/u,f=e.sampleRate*l,p=880*u/It.Quarter,j=r*u/It.Quarter,b=0,v=1,m=0;m<j;m++)for(var h=0;h<f;h++){var O=0===m?1.33*p:p,g=h+Math.floor(m*f),x=1/d.length,y=Math.min(x,h/(.015*e.sampleRate));o[g]+=Math.sin(b)*v,b+=2*Math.PI*O/e.sampleRate,v=Math.max(y-h/f,0)}}catch(N){i.e(N)}finally{i.f()}var k=e.createBufferSource();return k.buffer=c,k.loop=!0,k.loopEnd=a,k}),[r,d.length,s]);Object(a.useEffect)((function(){return p.start(),function(){return p.stop()}}),[p]);var j=Object(a.useCallback)((function(e){return f({notes:d.includes(e)?d.filter((function(t){return t!==e})):d.concat(e)})}),[d,f]);return Object(Q.jsx)(Oe,{id:n,outputs:["output"],title:"Metronome: ".concat(s," BPM"),type:o,children:c&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsxs)("div",{className:"customNode_item",children:[Object(Q.jsx)("input",{max:208,min:40,onChange:function(e){return f({beatsPerMinute:+e.target.value})},title:"Beats Per Minute",type:"number",value:s}),Object(Q.jsx)("input",{max:8,min:1,onChange:function(e){return f({beatsPerMeasure:+e.target.value})},title:"Beats Per Measure",type:"number",value:r})]}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("span",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[It.Whole,It.Half,It.Quarter,It.Eight,It.Sixteenth].map((function(e){return Object(Q.jsx)("button",{onClick:function(){return j(e)},style:Object(K.a)(Object(K.a)({},ln),{},{color:d.includes(e)?"#00d":"#d00"}),title:"".concat(It[e]," note"),children:Gt[It[e]]},e)}))})})]})})}var fn,pn=c.a.memo(dn);function jn(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.onChange,i=t.type,r=void 0===i?fn.White:i;return ke(n,"noise-processor",{numberOfInputs:0,processorOptions:{type:r}},[r]),Object(Q.jsx)(Oe,{id:n,outputs:["output"],title:"Noise: ".concat(r),type:c,children:a&&Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsxs)("select",{onChange:function(e){return o({type:e.target.value})},title:"Type",value:r,children:[Object(Q.jsx)("option",{value:fn.White,children:fn.White}),Object(Q.jsx)("option",{value:fn.Pink,children:fn.Pink}),Object(Q.jsx)("option",{value:fn.Brown,children:fn.Brown})]})})})})}!function(e){e.Brown="Brown",e.Pink="Pink",e.White="White"}(fn||(fn={}));var bn=c.a.memo(jn);function vn(e){var t=e.id,n=e.type;return ke(t,"not-gate-processor"),Object(Q.jsx)(Oe,{id:t,inputs:["input"],outputs:["output"],title:"Gate: NOT",type:n})}var mn=c.a.memo(vn);function hn(e){var t=e.id,n=e.type;return ke(t,"or-gate-processor",{numberOfInputs:2}),Object(Q.jsx)(Oe,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Gate: OR",type:n})}var On=c.a.memo(hn);var gn=function(e,t){var n=t.detune,c=void 0===n?0:n,o=t.frequency,i=void 0===o?440:o,r=t.type,u=void 0===r?"sine":r,s=fe(e,(function(e){return e.createOscillator()}));return Object(a.useEffect)((function(){return s.start(),function(){return s.stop()}}),[s]),Me((function(){s.detune.value=c}),[s,c]),Me((function(){s.frequency.value=i}),[s,i]),Me((function(){s.type=u}),[s,u]),s};function xn(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.detune,i=void 0===o?0:o,r=t.frequency,u=void 0===r?440:r,s=t.onChange,l=t.type,d=void 0===l?"sine":l,f=u*Math.pow(2,i/1200);return gn(n,{detune:i,frequency:u,type:d}),Object(Q.jsx)(Oe,{id:n,inputs:["detune","frequency"],outputs:["output"],title:"".concat(f.toFixed(2)," Hz ").concat(d),type:c,children:a&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{max:100,min:-100,onChange:function(e){return s({detune:+e.target.value})},step:1,style:{width:"100%"},title:"Detune: ".concat(i," cents"),type:"range",value:i})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{max:2e4,min:0,onChange:function(e){return s({frequency:+e.target.value})},title:"Frequency",type:"number",value:u})}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsxs)("select",{onChange:function(e){return s({type:e.target.value})},title:"Wave",value:d,children:[Object(Q.jsx)("option",{value:"sawtooth",children:"sawtooth"}),Object(Q.jsx)("option",{value:"square",children:"square"}),Object(Q.jsx)("option",{value:"sine",children:"sine"}),Object(Q.jsx)("option",{value:"triangle",children:"triangle"})]})})]})})}var yn=c.a.memo(xn);function kn(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.detune,i=void 0===o?0:o,r=t.octave,u=void 0===r?4:r,s=t.onChange,l=t.twelfth,d=void 0===l?0:l,f=t.type,p=void 0===f?"sine":f,j=Kt(u,d);return gn(n,{detune:i,frequency:j,type:p}),Object(Q.jsx)(Oe,{id:n,inputs:["detune"],outputs:["output"],title:Object(Q.jsx)($t,{detailed:!0,detune:i,octave:u,twelfth:d}),type:c,children:a&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{max:100,min:-100,onChange:function(e){return s({detune:+e.target.value})},step:1,style:{width:"100%"},title:"Detune: ".concat(i," cents"),type:"range",value:i})}),Object(Q.jsxs)("div",{className:"customNode_item",children:[Object(Q.jsx)("select",{onChange:function(e){return s({twelfth:+e.target.value})},style:{width:"50%"},title:"Note",value:d,children:Array(12).fill(0).map((function(e,t){return Object(Q.jsx)("option",{value:t,children:Ut(t)},t)}))}),Object(Q.jsx)("select",{onChange:function(e){return s({octave:+e.target.value})},style:{width:"50%"},title:"Octave",value:u,children:Array(11).fill(0).map((function(e,t){return Object(Q.jsx)("option",{value:t,children:t},t)}))})]}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsxs)("select",{onChange:function(e){return s({type:e.target.value})},style:{width:"100%"},title:"Wave",value:p,children:[Object(Q.jsx)("option",{value:"sawtooth",children:"sawtooth"}),Object(Q.jsx)("option",{value:"square",children:"square"}),Object(Q.jsx)("option",{value:"sine",children:"sine"}),Object(Q.jsx)("option",{value:"triangle",children:"triangle"})]})})]})})}var Nn=c.a.memo(kn);function Cn(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.onChange,r=t.output,u=void 0===r?"A":r,s=jt("".concat(n,"_input"),{}),l=jt("".concat(n,"_outputA"),{}),d=jt("".concat(n,"_outputB"),{});Object(a.useEffect)((function(){s.connect(l),s.connect(d)}),[s,l,d]);var f=Object(a.useCallback)((function(){return i({output:"A"===u?"B":"A"})}),[i,u]);return Object(a.useEffect)((function(){"A"===u?(l.gain.setTargetAtTime(1,l.context.currentTime,.015),d.gain.setTargetAtTime(0,d.context.currentTime,.015)):(l.gain.setTargetAtTime(0,l.context.currentTime,.015),d.gain.setTargetAtTime(1,d.context.currentTime,.015))}),[u,l,d]),fe(n,(function(){return{input:s,A:l,B:d,output:void 0}}),[s,l,d]),Object(Q.jsx)(Oe,{id:n,inputs:["input"],outputs:["A","B"],title:"Output: ".concat(u),type:o,children:c&&Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)(Wt,{checked:"A"===u,labelOff:"B",labelOn:"A",onChange:f})})})})}var wn=c.a.memo(Cn);function Tn(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.levels,i=void 0===o?256:o,r=t.max,u=void 0===r?1:r,s=t.min,l=void 0===s?-1:s,d=t.onChange;return ke(n,"quantizer-processor",{processorOptions:{levels:i,max:u,min:l}},[i,u,l]),Object(Q.jsx)(Oe,{id:n,inputs:["input"],outputs:["output"],title:"Quantizer",type:c,children:a&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsx)("div",{className:"customNode_item",style:{width:138},children:Object(Q.jsx)("input",{onChange:function(e){return d({levels:+e.target.value})},step:1,title:"Levels",type:"number",value:i})}),Object(Q.jsxs)("div",{className:"customNode_item",style:{width:138},children:[Object(Q.jsx)("input",{onChange:function(e){return d({min:+e.target.value})},step:1,style:{width:"50%"},title:"Min",type:"number",value:l}),Object(Q.jsx)("input",{onChange:function(e){return d({max:+e.target.value})},style:{width:"50%"},step:1,title:"Max>",type:"number",value:u})]})]})})}var _n,Sn=c.a.memo(Tn);function An(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.mode,i=void 0===o?_n.HalfWave:o,r=t.onChange;return ke(n,"rectifier-processor",{processorOptions:{mode:i}},[i]),Object(Q.jsx)(Oe,{id:n,inputs:["input"],outputs:["output"],title:"Rectifier",type:c,children:a&&Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsxs)("select",{onChange:function(e){return r({mode:e.target.value})},title:"Type",value:i,children:[Object(Q.jsx)("option",{value:_n.FullWave,children:_n.FullWave}),Object(Q.jsx)("option",{value:_n.HalfWave,children:_n.HalfWave})]})})})})}!function(e){e.FullWave="Full-wave",e.HalfWave="Half-wave"}(_n||(_n={}));var Mn,Dn,En,Rn=c.a.memo(An);function qn(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.levels,i=void 0===o?256:o,r=t.max,u=void 0===r?1:r,s=t.min,l=void 0===s?-1:s,d=t.onChange,f=t.mode,p=void 0===f?Mn.OnSet:f;return ke(n,"quantizer-processor",{processorOptions:{levels:i,max:u,min:l}},[i,u,l]),Object(Q.jsx)(Oe,{id:n,inputs:["input"],outputs:["output",p],title:"Aubio: ".concat(p),type:c,children:a&&Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"customNode_item",style:{width:138},children:Object(Q.jsxs)("select",{style:{width:"100%"},onChange:function(e){return d({mode:e.target.value})},title:"Type",value:p,children:[Object(Q.jsx)("option",{value:Mn.OnSet,children:Mn.OnSet}),Object(Q.jsx)("option",{value:Mn.Bpm,children:Mn.Bpm}),Object(Q.jsx)("option",{value:Mn.Pitch,children:Mn.Pitch})]})})})})}!function(e){e.OnSet="OnSet",e.Bpm="Bpm",e.Pitch="Pitch"}(Mn||(Mn={})),function(e){e.AttackTime="attack",e.DecayTime="decay",e.ReleaseTime="release",e.SustainLevel="sustain"}(Dn||(Dn={})),function(e){e.Attack="Attack",e.Decay="Decay",e.Release="Release",e.Sustain="Sustain"}(En||(En={}));var Fn=c.a.memo(qn),Bn=function(){var e=Object(l.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:null===t||{deviceId:{exact:t.deviceId}},video:!1});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Error:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();function Pn(e){var t,n=e.id,c=e.type,o=e.selected,i=Object(a.useState)([]),u=Object(r.a)(i,2),s=u[0],l=u[1],d=Object(a.useState)(null),f=Object(r.a)(d,2),p=f[0],j=f[1],b=Object(a.useState)(),v=Object(r.a)(b,2),m=v[0],h=v[1],O=fe(n,(function(e){return e.createGain()}));return Object(a.useEffect)((function(){p&&h(p.label)}),[p]),Object(a.useEffect)((function(){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(e){e.length&&l(e.filter((function(e){return"audioinput"===e.kind})))})).catch((function(e){console.log(e.name+": "+e.message)})):console.log("enumerateDevices() not supported.")}),[]),console.log(s),Object(Q.jsxs)(Oe,{id:n,outputs:["output"],type:c,title:"Source: AudioDevice",children:[Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsxs)("div",{className:"customNode_item",children:[Object(Q.jsx)("button",{onClick:function(){return console.log(p),void Bn(p).then((function(e){t=e,O.context.createMediaStreamSource(e).connect(O)}))},children:"\u25b6"}),Object(Q.jsx)("button",{onClick:function(){O.context&&(t.getTracks().forEach((function(e){return e.stop()})),O.context.close(),window.location.reload())},children:"\u25fd"})]})}),o&&s.length>0&&Object(Q.jsx)("select",{value:m,onChange:function(e){return j(s.find((function(t){return t.label===e.target.value})))},children:s&&s.map((function(e,t){return Object(Q.jsx)("option",{children:e.label},t)}))})]})}var zn,Wn=c.a.memo(Pn);function Ln(e){var t=e.id,n=e.type,a=ke("".concat(t,"_worklet"),"sample-and-hold-processor");return fe(t,(function(){var e;return e={},Object(ne.a)(e,zn.HoldTime,a.parameters.get(zn.HoldTime)),Object(ne.a)(e,"input",a),Object(ne.a)(e,"output",a),e}),[a]),Object(Q.jsx)(Oe,{id:t,inputs:["input",zn.HoldTime],outputs:["output"],title:"Sample/Hold",type:n})}!function(e){e.HoldTime="holdTime"}(zn||(zn={}));var Gn=c.a.memo(Ln);function In(e){var t=e.id,n=e.type;return ke(t,"sign-processor"),Object(Q.jsx)(Oe,{id:t,inputs:["input"],outputs:["output"],title:"Sign",type:n})}var Hn=c.a.memo(In);var Qn=function(e,t){var n=t.pan,a=void 0===n?0:n,c=fe(e,(function(e){return e.createStereoPanner()}));return Me((function(){c.pan.value=a}),[c,a]),c};function Xn(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.pan,i=void 0===o?0:o,r=t.onChange,u="Stereo: ".concat(Math.abs(100*i).toFixed(0),"% ").concat(i>0?"Right":i<0?"Left":"");return Qn(n,{pan:i}),Object(Q.jsx)(Oe,{id:n,inputs:["input","pan"],outputs:["output"],title:u,type:c,children:a&&Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("input",{max:"1",min:"-1",onChange:function(e){return r({pan:+e.target.value})},step:"0.01",title:u,type:"range",value:i})})})})}var Kn=c.a.memo(Xn),Un={width:50};function Vn(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.inputMax,i=void 0===o?1:o,r=t.inputMin,u=void 0===r?-1:r,s=t.onChange,l=t.outputMax,d=void 0===l?1:l,f=t.outputMin,p=void 0===f?0:f;return ke(n,"transformer-processor",{processorOptions:{inputMin:u,inputMax:i,outputMin:p,outputMax:d}},[u,i,p,d]),Object(Q.jsx)(Oe,{id:n,inputs:["input"],outputs:["output"],title:"Transformer",type:c,children:a&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsxs)("div",{className:"customNode_item",children:[Object(Q.jsx)("input",{onChange:function(e){return s({inputMin:+e.target.value})},style:Un,title:"Input min",type:"number",value:u}),Object(Q.jsx)("span",{children:"\u2192"}),Object(Q.jsx)("input",{onChange:function(e){return s({outputMin:+e.target.value})},style:Un,title:"Output min",type:"number",value:p})]}),Object(Q.jsxs)("div",{className:"customNode_item",children:[Object(Q.jsx)("input",{onChange:function(e){return s({inputMax:+e.target.value})},style:Un,title:"Input max",type:"number",value:i}),Object(Q.jsx)("span",{children:"\u2192"}),Object(Q.jsx)("input",{onChange:function(e){return s({outputMax:+e.target.value})},style:Un,title:"Output max",type:"number",value:d})]})]})})}var Yn=c.a.memo(Vn),Jn=f.a.mark($n),Zn=f.a.mark(ea);function $n(e,t){var n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=0;case 1:if(!(n<e)){a.next=7;break}return a.next=4,t(n);case 4:n++,a.next=1;break;case 7:case"end":return a.stop()}}),Jn)}function ea(e,t){var n,a;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:n=Math.min(e.length,t.length),a=0;case 2:if(!(a<n)){c.next=8;break}return c.next=5,[e[a],t[a]];case 5:a++,c.next=2;break;case 8:case"end":return c.stop()}}),Zn)}function ta(){}function na(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],o=n[1],i=Object(a.useCallback)((function(t){t.key===e&&o(!0)}),[e]),u=Object(a.useCallback)((function(t){t.key===e&&o(!1)}),[e]);return Object(a.useEffect)((function(){return window.addEventListener("keydown",i),window.addEventListener("keyup",u),function(){window.removeEventListener("keydown",i),window.removeEventListener("keyup",u)}}),[i,u]),c}var aa=["onChange","value","largeStep","standardStep","smallStep"];var ca=function(e){var t=e.onChange,n=e.value,a=e.largeStep,c=void 0===a?10:a,o=e.standardStep,i=void 0===o?1:o,r=e.smallStep,u=void 0===r?.1:r,s=Object(pe.a)(e,aa),l=na("Shift"),d=na("Alt"),f=l?c:d?u:i;return Object(Q.jsx)("input",Object(K.a)(Object(K.a)({},s),{},{type:"number",step:"0",onKeyDown:function(e){var a=e.key;function c(e){return Math.round(10*e)/10}"ArrowUp"===a?t(c(n+f)):"ArrowDown"===a&&t(c(n-f))},onChange:function(e){return t(+e.target.value)},value:n}))};function oa(e){var t=e.filterDesc,n=e.bandStyle,c=e.onGainChange,o=e.onQChange,i=Object(a.useCallback)((function(e){c(vt(e.target.valueAsNumber))}),[c]);return Object(Q.jsxs)("div",{className:"vocoderNode_bandStrip",children:[Object(Q.jsx)("div",{className:"centerHz",children:t.hz}),Object(Q.jsx)("div",{className:"colorSwatch",style:{background:n.freqColor}}),Object(Q.jsx)("input",{type:"range",onChange:i,value:bt(t.gainDb),max:3,min:1e-4,step:.001}),Object(Q.jsx)(ca,{value:t.q,min:0,max:60,onChange:o})]})}var ia=n(16),ra=n.n(ia),ua=(n(66),Math.log2(1024)),sa=512,la=4e3,da=[{hz:101,type:"lowpass",gainDb:-2.55,q:.55},{hz:154,type:"bandpass",gainDb:-2.4,q:2.96},{hz:208,type:"bandpass",gainDb:-2.4,q:4},{hz:285,type:"bandpass",gainDb:-3,q:3.55},{hz:395,type:"bandpass",gainDb:-2.5,q:3.7},{hz:542,type:"bandpass",gainDb:-3.12,q:3.75},{hz:720,type:"bandpass",gainDb:-2.8,q:3.7},{hz:1013,type:"bandpass",gainDb:-2.8,q:3.9},{hz:1495,type:"bandpass",gainDb:-3.4,q:3.2},{hz:2001,type:"bandpass",gainDb:-3.15,q:5.16},{hz:2546,type:"bandpass",gainDb:-2.8,q:4.48},{hz:3030,type:"highpass",gainDb:-2,q:.88}];function fa(e){for(var t=e.id,n=e.type,c=jt("".concat(t,"_modulate"),{}),o=Ee("".concat(t,"_modulate_analyser"),{fftSizeExp:ua}),i=jt("".concat(t,"_carrier"),{}),u=jt("".concat(t,"_output"),{}),l=Object(a.useState)(Object(s.a)(da,ta)),d=Object(r.a)(l,2),f=d[0],p=d[1],j=Object(a.useState)(!1),b=Object(r.a)(j,2),v=b[0],m=b[1],h=c.context.sampleRate,O=f.map((function(e){var n,a=e.hz,c=e.type,o=e.gainDb,i=e.q,r=jt("".concat(t,"_modulate_gain_").concat(a),{gain:bt(o),instant:!0});return{filter:We("".concat(t,"_modulate_filter1_").concat(a),{frequency:a,gain:0,type:c,Q:i}),gain:r,envelopeFollower:ke("".concat(t,"_modulate_envelope_").concat(a),"envelope-follower",{parameterData:(n={},Object(ne.a)(n,Ct.AttackTime,0),Object(ne.a)(n,Ct.ReleaseTime,3e-4),n)})}})),g=new Map,x=Float32Array.from($n(240,(function(e){return 16.666666666666668*e+0}))),y=function(e){var t=Object(a.useMemo)((function(){var t=O[e],n=t.filter,a=t.gain,c=new Float32Array(x.length),o=new Float32Array(x.length);n.getFrequencyResponse(x,c,o);var i=c.map((function(e){return e*a.gain.value}));return{frequencies:x,magResponse:i,phaseResponse:o}}),[f[e]]);g.set(f[e].hz,t)},k=0;k<f.length;k++)y(k);var N=f.map((function(e){var n=e.hz,a=e.type,c=e.q;return{filter1:We("".concat(t,"_carrier_filter1_").concat(n),{frequency:n,gain:0,type:a,Q:c}),filter2:We("".concat(t,"_carrier_filter2_").concat(n),{frequency:n,gain:0,type:a,Q:c}),gain:jt("".concat(t,"_carrier_gain_").concat(n),{gain:0,instant:!0}),analyser:Ee("".concat(t,"_carrier_analyser_").concat(n),{fftSizeExp:ua})}}));Object(a.useEffect)((function(){c.connect(o);var e,t=Object(sn.a)(O);try{for(t.s();!(e=t.n()).done;){var n=e.value,a=n.gain;[n.filter,a,n.envelopeFollower].reduce((function(e,t){return e?t?e.connect(t):e:t}))}}catch(v){t.e(v)}finally{t.f()}var i,s=Object(sn.a)(N.entries());try{for(s.s();!(i=s.n()).done;){var l=Object(r.a)(i.value,2),d=l[0],f=l[1],p=f.filter1,j=f.filter2,b=f.gain;[p,j,b,f.analyser].reduce((function(e,t){return e?t?e.connect(t):e:t})),O[d].envelopeFollower.connect(b.gain),b.connect(u)}}catch(v){s.e(v)}finally{s.f()}}),[u]),Object(a.useEffect)((function(){var e,t=Object(sn.a)(O);try{for(t.s();!(e=t.n()).done;){var n=e.value.filter;v?c.disconnect(n):c.connect(n)}}catch(u){t.e(u)}finally{t.f()}var a,o=Object(sn.a)(N);try{for(o.s();!(a=o.n()).done;){var r=a.value.filter1;v?i.disconnect(r):i.connect(r)}}catch(u){o.e(u)}finally{o.f()}}),[v]),fe(t,(function(){return{carrier:i,modulation:c,input:void 0,output:u,stop:function(){},disconnect:function(){ae(i),ae(c),ae(u)}}}),[i,c,u]);var C=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=C.current,t=null===e||void 0===e?void 0:e.getContext("2d");e&&t&&function(e,t,n){var a=n.min,c=n.max,o=e.canvas.height,i=e.canvas.width,u=function(e){return 0===e?0:Math.log10(e/100)},s=u(a),l=u(c),d=function(e){var t=u(e);return i*((t-s)/(l-s))};e.clearRect(0,0,i,o);var f,p=o/3,j=Object(sn.a)(da.entries());try{for(j.s();!(f=j.n()).done;){var b=Object(r.a)(f.value,2),v=b[0],m=b[1].hz,h=t.get(m),O=h.frequencies,g=h.magResponse,x=ba[v].responseColor;e.strokeStyle=ra()(x).alpha(.26).rgb().string(),e.lineWidth=2;var y=e.createLinearGradient(0,o,0,0);y.addColorStop(0,ra()(x).alpha(.15).rgb().string()),y.addColorStop(.2,ra()(x).alpha(.1).rgb().string()),y.addColorStop(1,ra()(x).alpha(.01).rgb().string());for(var k=!1,N=0,C=o,w=g.length,T=0;T<w;T++){N=d(O[T]);var _=o-p*g[T];C=Math.min(_,C),k?e.lineTo(N,_):(e.beginPath(),e.moveTo(N,_),k=!0)}e.stroke(),e.lineTo(N,o),e.lineTo(0,o),e.closePath(),e.fillStyle=y,e.fill()}}catch(S){j.e(S)}finally{j.f()}}(t,g,{min:0,max:la})}),[g]);var w=Object(a.useRef)([]),T=Object(a.useRef)(null),_=Object(a.useCallback)((function(){var e,t,n=(e=da.length,t=function(e){var t=new Uint8Array(sa);return N[e].analyser.getByteFrequencyData(t),{frequency:da[e].hz,freqBins:t}},Array.from($n(e,t)));return w.current=n,h}),[h].concat(Object(Z.a)(N))),S=Object(a.useCallback)((function(e){var t=T.current,n=null===t||void 0===t?void 0:t.getContext("2d");t&&n&&function(e,t,n){var a=n.min,c=n.max,o=n.sampleRate;if(!t.length)return;if(t.length>ba.length)return void console.error("Not enough frequency colors");var i=e.canvas.height,u=e.canvas.width,s=function(e){return 0===e?0:Math.log10(e/100)},l=s(a),d=s(c),f=function(e){var t=s(e);return u*((t-l)/(d-l))};e.clearRect(0,0,u,i);var p,j=o/2,b=Math.floor(sa*(a/j)),v=Math.ceil(sa*(c/j)),m=v-b,h=j/sa,O=b*h,g=i-60,x=Object(sn.a)(t.entries());try{for(x.s();!(p=x.n()).done;){var y=Object(r.a)(p.value,2),k=y[0],N=y[1].freqBins,C=ba[k].freqColor;e.strokeStyle=C,e.lineWidth=2,e.beginPath();for(var w=0,T=!1,_=N.subarray(b,v),S=0;S<m;S++){w=f(O+S*h);var A=i-g*(_[S]/255);T?e.lineTo(w,A):(e.moveTo(w,A),T=!0)}e.stroke()}}catch(M){x.e(M)}finally{x.f()}}(n,w.current,{sampleRate:e,min:0,max:la})}),[]),A=Object(a.useCallback)((function(){var e=_();S(e)}),[S,_]);return we(A,!v),Object(Q.jsxs)(Oe,{id:t,inputs:["carrier","modulation"],outputs:["output"],title:"Vocoder",type:n,children:[Object(Q.jsxs)("div",{className:"vocoderNode_canvasHost",children:[Object(Q.jsx)("canvas",{ref:T,style:{display:"block",width:800,height:400},width:"600",height:"300"}),Object(Q.jsx)("canvas",{ref:C,className:"vocoderNode_overlayCanvas",width:"800",height:"400"}),Object(Q.jsx)("button",{className:"vocoderNode_overlayPause",onClick:function(){return m(!v)},children:v?"Run":"Pause"})]}),Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"vocoderNode_bandStrips",children:f.map((function(e,t){return Object(Q.jsx)(oa,{filterDesc:e,bandStyle:ba[t],onGainChange:function(e){return p(Object(s.a)(f,(function(n){n[t].gainDb=e})))},onQChange:function(e){return p(Object(s.a)(f,(function(n){n[t].q=e})))}},e.hz)}))})})]})}var pa,ja,ba=(pa=["#fff566","#b37feb","#5cdbd3","#85a5ff","#ff85c0","#95de64","#ffd666","#ff7875","#ff9c6e","#ffc069","#d3f261","#69c0ff"],ja=["#ffec3d","#9254de","#36cfc9","#597ef7","#f759ab","#73d13d","#ffc53d","#ff4d4f","#ff7a45","#ffa940","#bae637","#40a9ff"],Array.from(ea(pa,ja))).map((function(e){var t=Object(r.a)(e,2);return{freqColor:t[0],responseColor:t[1]}})),va=c.a.memo(fa);function ma(e){var t,n=e.data,c=e.id,o=e.selected,i=e.type,u=n.onChange,s=n.oversample,l=Object(a.useState)(null!==(t=n.curveFn)&&void 0!==t?t:"const k = 50;\nconst samples = curve.length;\nconst deg = Math.PI / 180;\nfor (let i = 0; i < samples; i++) {\n  const x = (i * 2) / samples - 1;\n  curve[i] = ((3 + k) * x * 20 * deg) / (Math.PI + k * Math.abs(x));\n}\nreturn curve;"),d=Object(r.a)(l,2),f=d[0],j=d[1],b=Object(a.useState)(f),v=Object(r.a)(b,2),m=v[0],h=v[1],O=Object(a.useContext)(p),g=Object(a.useMemo)((function(){var e=new Float32Array(O.sampleRate);return new Function("curve",m)(e)}),[O.sampleRate,m]);Ze(c,{curve:g,oversample:s});var x=Object(a.useCallback)((function(){try{new Function("curve",f)(new Float32Array(O.sampleRate)),h(f),u({curveFn:f})}catch(e){console.error(e)}}),[O.sampleRate,f,u]);return Object(Q.jsx)(Oe,{id:c,inputs:["input"],outputs:["output"],type:i,children:o&&Object(Q.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(Q.jsxs)("div",{className:"customNode_item",style:{flexWrap:"wrap"},children:[Object(Q.jsx)("textarea",{onChange:function(e){return j(e.target.value)},rows:8,style:{width:"100%"},title:"Curve function",value:f}),Object(Q.jsx)("button",{onClick:x,children:"save"})]}),Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsxs)("select",{onChange:function(e){return u({oversample:e.target.value})},title:"Oversample",value:s,children:[Object(Q.jsx)("option",{value:"none",children:"none"}),Object(Q.jsx)("option",{value:"2x",children:"2x"}),Object(Q.jsx)("option",{value:"4x",children:"4x"})]})})]})})}var ha=c.a.memo(ma);function Oa(e){var t=e.id,n=e.type;return ke(t,"xor-gate-processor",{numberOfInputs:2}),Object(Q.jsx)(Oe,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Gate: XOR",type:n})}var ga=c.a.memo(Oa);function xa(e){var t=e.id,n=e.type,c=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=c.current,t=null===e||void 0===e?void 0:e.getContext("2d");e&&t&&function(e){var t=e.canvas.height,n=e.canvas.width;e.clearRect(0,0,n,t),e.setLineDash([4,4]),e.fillStyle="#000000",e.font="20px monospace",e.lineWidth=1,e.strokeStyle="#000000",e.textAlign="center",e.textBaseline="middle",e.beginPath(),e.moveTo(30,t/2),e.lineTo(n-30,t/2),e.stroke(),e.closePath(),e.fillText("1",n/2,15),e.fillText("-1",n/2,t-15),e.beginPath(),e.moveTo(n/2,30),e.lineTo(n/2,t-30),e.stroke(),e.closePath(),e.fillText("1",n-15,t/2),e.fillText("-1",15,t/2)}(t)}),[]);var o=ct("".concat(t,"_gate"),{}),i=ct("".concat(t,"_x"),{}),r=ct("".concat(t,"_y"),{}),u=Object(a.useCallback)((function(e){var t=e.x,n=e.y;i.offset.setTargetAtTime(t,i.context.currentTime,.015),r.offset.setTargetAtTime(n,r.context.currentTime,.015)}),[i,r]),s=Object(a.useCallback)((function(){o.offset.value=1}),[o]),l=Object(a.useCallback)((function(){o.offset.value=0}),[o]);return fe(t,(function(){return{gate:o,input:void 0,output:void 0,x:i,y:r}}),[o,i,r]),Object(Q.jsx)(Oe,{id:t,outputs:["x","y","gate"],title:"XY Pad",type:n,children:Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)("canvas",{ref:c,height:400,onMouseMove:function(e){return u(function(e){var t=e.target.getBoundingClientRect();return{x:(e.clientX-t.left-t.width/2)/(t.width/2),y:-(e.clientY-t.top-t.height/2)/(t.height/2)}}(e))},style:{background:"white",cursor:"crosshair",height:200,width:200},width:400,onMouseDown:s,onMouseUp:l})})})})}var ya=c.a.memo(xa);function ka(e){var t=e.data,n=e.id,a=e.selected,c=e.type,o=t.gain,i=void 0===o?1:o,r=t.onChange,u="Gain: ".concat(i.toFixed(2));return jt(n,{gain:i,instant:!0}),Object(Q.jsx)(Oe,{id:n,inputs:["input","gain"],outputs:["output"],title:u,type:c,children:a&&Object(Q.jsx)("div",{className:"customNode_editor nodrag",children:Object(Q.jsx)("div",{className:"customNode_item",children:Object(Q.jsx)(ca,{value:i,onChange:function(e){return r({gain:e})}})})})})}var Na={ADSR:Ce,Analyser:qe,AndGate:Be,Aubio:Fn,AudioBufferSource:ze,AudioDeviceSource:Wn,BiquadFilter:He,ChannelMerger:Ue,ChannelSplitter:Je,Clipper:tt,Comparator:at,ConstantSource:it,Delay:dt,DelayEffect:ht,Destination:xt,DynamicsCompressor:wt,EnvelopeFollower:St,Equalizer:qt,Gain:Bt,Gate:zt,InputSwitch:Ht,Keyboard:an,Meter:un,Metronome:pn,Noise:bn,NotGate:mn,OrGate:On,Oscillator:yn,OscillatorNote:Nn,OutputSwitch:wn,Quantizer:Sn,RawGain:c.a.memo(ka),Rectifier:Rn,SampleAndHold:Gn,Vocoder:va,Sign:Hn,StereoPanner:Kn,Transformer:Yn,WaveShaper:ha,XorGate:ga,XYPad:ya};function Ca(e){return e.source?Object.assign({},e,{style:{stroke:"#0dbed".concat(e.source.substr(-1))}}):e}function wa(e,t){return Ta.apply(this,arguments)}function Ta(){return(Ta=Object(l.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.filter(u.h).reduce((function(e,t){return e[t.source]=!0,e[t.target]=!0,e}),{});case 1:if(!Object.keys(a).length){e.next=7;break}return Object.keys(n).forEach((function(e){delete a[e]})),e.next=5,new Promise((function(e){return setTimeout(e,0)}));case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _a=10;function Sa(e){return Math.floor(e/_a)*_a}function Aa(){var e=ve(),t=e.elements,n=e.onChangeElementFactory,c=e.setElements,o=e.setTransform,i=e.transform,d=V(),p=de().nodes,j=Object(a.useState)(null),b=Object(r.a)(j,2),v=b[0],m=b[1],h=function(){var e=de().getNode;return Object(a.useCallback)((function(t){return re(t,e)}),[e])}(),O=function(){var e=de().getNode;return Object(a.useCallback)((function(t){return ue(t,e)}),[e])}(),g=function(){var e=de().getNode;return Object(a.useCallback)((function(t){return ae(e(t))}),[e])}(),x=Object(a.useCallback)(function(){var e=Object(l.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setTransform(i),c(Object(s.a)((function(e){e.filter(u.i).forEach((function(e){e.data.onChange=n(e.id)}))}))),e.next=4,wa(t,p);case 4:t.filter(u.h).forEach((function(e){return h(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),y=Object(a.useCallback)((function(e){o(e)}),[o]),k=Object(a.useCallback)((function(e,t){m(t)}),[]),N=Object(a.useCallback)((function(e){return m(null)}),[]),C=Object(a.useCallback)((function(e){c((function(t){return Object(u.f)(Ca(e),t)})),h(e)}),[h,c]),w=Object(a.useCallback)((function(e){e.filter(u.h).forEach((function(e){return O(e)})),e.filter(u.i).forEach((function(e){return g(e.id)})),c((function(t){return Object(u.j)(e,t)}))}),[O,g,c]),T=Object(a.useCallback)((function(e,t){O(e),c((function(t){return Object(u.j)([e],t)})),c((function(e){return Object(u.f)(Ca(t),e)})),h(t)}),[O,h,c]),_=Object(a.useCallback)((function(e,t){c(Object(s.a)((function(e){var n=e.filter(u.i).find((function(e){return e.id===t.id}));n&&(n.position={x:Sa(t.position.x),y:Sa(t.position.y)})})))}),[c]),S=Object(a.useCallback)((function(e){var t="".concat(e,"-").concat(Object(je.a)()),a={id:t,data:{onChange:n(t)},type:e,position:{x:Sa((d.getRect().left-i.x)/i.zoom),y:Sa((d.getRect().top-i.y)/i.zoom)}};c((function(e){return[].concat(Object(Z.a)(e),[a])})),d.hide()}),[d,n,c,i]),A=Object(a.useCallback)((function(){d.hide()}),[d]),M=Object(a.useCallback)((function(e){e.preventDefault(),d.setRect({width:0,height:0,top:e.clientY,right:0,bottom:0,left:e.clientX}),d.show(Object(Q.jsx)(te,{addNode:S}))}),[S,d]);return Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsxs)(u.g,{"data-connecting-handletype":v?v.handleType:void 0,defaultPosition:[i.x,i.y],defaultZoom:i.zoom,elements:t,nodeTypes:Na,onConnect:C,onConnectStart:k,onConnectStop:N,onEdgeUpdate:T,onElementsRemove:w,onLoad:x,onMoveEnd:y,onNodeDragStop:_,onPaneClick:A,onPaneContextMenu:M,onlyRenderVisibleElements:!1,selectNodesOnDrag:!1,snapToGrid:!0,snapGrid:[_a,_a],style:{zIndex:0},children:[Object(Q.jsx)(u.a,{gap:_a}),Object(Q.jsx)(u.b,{})]})})}var Ma=c.a.memo(Aa),Da=n.p+"static/media/logo.7b27df5c.svg",Ea={fontSize:12,height:"100%",resize:"none",width:"100%"},Ra={display:"flex",position:"absolute",right:"100%",top:80,transform:"rotate(-90deg)",transformOrigin:"bottom right"},qa={display:"flex",position:"absolute",left:0,right:0,top:0,height:70,backgroundColor:"#0dbedc",backgroundSize:"25%",backgroundRepeat:"no-repeat",backgroundPosition:"-5% center"},Fa=function(){return{id:Object(je.a)(),elements:[],transform:{x:0,y:0,zoom:1}}};var Ba=function(){var e=ve(),t=e.elements,n=e.id,c=e.setElements,o=e.setId,i=e.setTransform,u=e.transform,s=Object(a.useState)(!1),l=Object(r.a)(s,2),d=l[0],f=l[1],p=Object(a.useMemo)((function(){return function(e){return{height:"100%",padding:10,position:"absolute",right:0,top:0,transform:e?"translateX(0)":"translateX(100%)",transition:"transform 0.4s ease",width:400}}(d)}),[d]);Object(a.useEffect)((function(){var e=atob(window.location.hash.substr(1));try{var t=JSON.parse(e),n=t.elements,a=t.id,r=t.transform;c(n),o(null!==a&&void 0!==a?a:Object(je.a)()),i(r)}catch(u){console.error(u)}}),[c,o,i]),Object(a.useEffect)((function(){window.history.replaceState(null,document.title,"#"+btoa(JSON.stringify({elements:t.map((function(e){return Object(K.a)(Object(K.a)({},e),{},{__rf:void 0})})),id:n,transform:u})))}),[t,n,u]);var j=Object(a.useCallback)((function(e){try{var t,n=JSON.parse(null!==(t=e.target.value)&&void 0!==t?t:""),a=n.elements,r=n.id,u=n.transform;c(a),o(null!==r&&void 0!==r?r:Object(je.a)()),i(u)}catch(e){console.error(e)}}),[c,o,i]),b=Object(a.useCallback)((function(){var e=Fa();c(e.elements),o(e.id),i(e.transform)}),[c,o,i]),v=Object(a.useCallback)((function(){return f((function(e){return!e}))}),[]);return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{style:Object(K.a)(Object(K.a)({},qa),{},{backgroundImage:"url(".concat(Da,")")})}),Object(Q.jsxs)("div",{style:p,children:[Object(Q.jsx)("textarea",{onChange:j,style:Ea,value:JSON.stringify({elements:t.map((function(e){return Object(K.a)(Object(K.a)({},e),{},{__rf:void 0})})),id:n,transform:u},null,2)}),Object(Q.jsxs)("div",{style:Ra,children:[Object(Q.jsx)("button",{onClick:b,style:{marginRight:10},children:"clear"}),Object(Q.jsx)("button",{onClick:v,children:d?"hide":"show"})]})]})]})};var Pa=function(){var e=Object(a.useMemo)(Fa,[]),t=Object(a.useState)(e.id),n=Object(r.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(e.elements),l=Object(r.a)(i,2),d=l[0],f=l[1],p=Object(a.useState)(e.transform),j=Object(r.a)(p,2),b=j[0],v=j[1],m=Object(a.useCallback)((function(e){return function(t){f(Object(s.a)((function(n){var a=n.filter(u.i).find((function(t){return t.id===e}));a&&Object.keys(t).forEach((function(e){return a.data[e]=t[e]}))})))}}),[f]),h={elements:d,id:c,onChangeElementFactory:m,setElements:f,setId:o,setTransform:v,transform:b};return Object(Q.jsx)(be.Provider,{value:h,children:Object(Q.jsx)(X,{children:Object(Q.jsx)(u.e,{children:Object(Q.jsx)(ce,{children:Object(Q.jsx)(J,{children:Object(Q.jsxs)("div",{style:{alignItems:"stretch",display:"flex",height:"100vh"},children:[Object(Q.jsx)(Ma,{},h.id),Object(Q.jsx)(Ba,{})]})})})})})})},za=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};i.a.render(Object(Q.jsx)(c.a.StrictMode,{children:Object(Q.jsx)(Pa,{})}),document.getElementById("root")),za()}},[[67,1,2]]]);
//# sourceMappingURL=main.00c5650d.chunk.js.map